<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ca La Maria - Haz tu pedido</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp"></script>
    <style>
      .selected {
        background-color: #d1fae5;
        /* bg-green-100 */
        border-color: #10b981;
        /* border-green-500 */
      }

      .product-card {
        padding: 0.5rem;
        /* Reduce the padding */
        height: auto;
        /* Adjust height */
      }

      .summary-table {
        width: 100%;
        border-collapse: collapse;
      }

      .summary-table th,
      .summary-table td {
        padding: 0.5rem;
        text-align: left;
        border-bottom: 1px solid #e5e7eb;
        /* bg-gray-200 */
      }

      .summary-table th {
        font-weight: bold;
      }

      .summary-table .price {
        font-weight: bold;
      }

      .summary-table input.quantity {
        text-align: center;
        height: 2rem;
        padding: 0.25rem;
      }
    </style>
    <script>
      const products = {
        "Platos Principales": [{
          "name": "Patatas bravas ración",
          "price": 5.5
        }, {
          "name": "Macarrones a la boloñesa",
          "price": 5.5
        }, {
          "name": "Macarrones a la carbonara",
          "price": 5.5
        }, {
          "name": "Judías verdes con patatas hervidas",
          "price": 5.5
        }, {
          "name": "Revuelto de verduras",
          "price": 5.5
        }, {
          "name": "Arroz con verduras precio por persona mínimo 2 personas",
          "price": 5.5
        }, {
          "name": "Huevos fritos con patatas a lo pobre",
          "price": 5.5
        }, {
          "name": "Fideua con gambas peladas y tacos de sepia mínimo 2 personas precio por pes",
          "price": 7.5
        }, {
          "name": "Canelones de carne",
          "price": 5.5
        }, {
          "name": "Ensalada, lechuga, tomate, cebolla, atún y huevo",
          "price": 5.5
        }, {
          "name": "Picadillo de tomate con 2 huevos fritos",
          "price": 5.5
        }, {
          "name": "Ensalada de patatas",
          "price": 5.5
        }, {
          "name": "Ensalada de garbanzos",
          "price": 5.5
        }, {
          "name": "Ensalada de tomate con atún",
          "price": 5.5
        }, {
          "name": "Pure de verduras",
          "price": 5.5
        }, {
          "name": "Espaguetis",
          "price": 5.5
        }, {
          "name": "Bacalao con sanfaina",
          "price": 10.0
        }, {
          "name": "Butifarra con patatas",
          "price": 5.5
        }, {
          "name": "Lomo rebozado super jugoso",
          "price": 5.5
        }, {
          "name": "Escalopa de cerdo",
          "price": 5.5
        }, {
          "name": "Escalopa de pollo",
          "price": 5.5
        }, {
          "name": "Calamares de pota a la romana",
          "price": 5.5
        }, {
          "name": "Nuggets de pollo",
          "price": 5.5
        }, {
          "name": "Huevos al plato, tomate chorizo y 2 huevos",
          "price": 5.5
        }, {
          "name": "Timbal, patatas a lo pobre, pimiento, tomate, cebolla y pollo",
          "price": 5.5
        }, {
          "name": "Alitas de pollo",
          "price": 5.5
        }, {
          "name": "Tiras de sepia a la plancha",
          "price": 5.5
        }, {
          "name": "Croquetas de pollo",
          "price": 5.5
        }, {
          "name": "Albondigas con tomate",
          "price": 5.5
        }, {
          "name": "Tilapia (pescado)",
          "price": 5.5
        }, {
          "name": "Pechuga de pollo rellena",
          "price": 7.9
        }, {
          "name": "1/4 de pollo al horno pechuga o muslo",
          "price": 5.5
        }, {
          "name": "Salchichas con cebolla caramelizada",
          "price": 5.5
        }],
        "Bocadillos": [{
          "name": "Tortilla francesa",
          "price": 3.5
        }, {
          "name": "Chorizo",
          "price": 3.5
        }, {
          "name": "Queso",
          "price": 3.5
        }, {
          "name": "Jamón dulce",
          "price": 3.5
        }, {
          "name": "Bacon",
          "price": 3.5
        }, {
          "name": "Huevo Frito",
          "price": 3.5
        }, {
          "name": "Fuet",
          "price": 3.9
        }, {
          "name": "Jamón dulce y queso",
          "price": 3.9
        }, {
          "name": "Pimiento, cebolla, huevo duro",
          "price": 3.9
        }, {
          "name": "Tortilla de Jamón dulce",
          "price": 3.9
        }, {
          "name": "Tortilla de Atún",
          "price": 3.9
        }, {
          "name": "Tortilla de queso",
          "price": 3.9
        }, {
          "name": "Tortilla de jamón york",
          "price": 3.9
        }, {
          "name": "Tortilla de jamón serrano",
          "price": 3.9
        }, {
          "name": "Tortilla de patatas",
          "price": 3.9
        }, {
          "name": "Tortilla de chorizo",
          "price": 3.9
        }, {
          "name": "Tortilla de verduras",
          "price": 3.9
        }, {
          "name": "Lomo",
          "price": 3.9
        }, {
          "name": "Butifarra Blanca",
          "price": 3.9
        }, {
          "name": "Chistorra",
          "price": 3.9
        }, {
          "name": "Jamón Serrano",
          "price": 3.9
        }, {
          "name": "Vegetal de pollo",
          "price": 4.9
        }, {
          "name": "Vegetal de berenjena",
          "price": 4.9
        }, {
          "name": "Vegetal de atún",
          "price": 4.9
        }, {
          "name": "Bikini",
          "price": 4.9
        }, {
          "name": "Salchichas del país",
          "price": 4.9
        }, {
          "name": "Atún",
          "price": 4.9
        }, {
          "name": "Hamburguesa",
          "price": 4.9
        }],
        "Bocadillos Especiales": [{
          "name": "Jamón del pais, Tortilla francesa, Bacon y Pimiento con pan de vidre",
          "price": 6.9
        }, {
          "name": "Lomo, Tortilla francesa, Queso y Pimiento con pan de vidre",
          "price": 6.9
        }, {
          "name": "Lomo, Jamon, Queso y Tomate con pan de vidre",
          "price": 6.9
        }, {
          "name": "Atún, Queso y Chorizo con pan de vidre",
          "price": 6.9
        }, {
          "name": "Lomo, Queso, Bacon, Huevo frito, Lechuga y Tomate con pan de vidre",
          "price": 6.9
        }, {
          "name": "Pollo, Queso, Huevo duro, Tomate y Lechuga",
          "price": 6.9
        }, {
          "name": "Tortilla, Jamón, Tomate, Cebolla y Pimiento con pan de vidre",
          "price": 6.9
        }, {
          "name": "Caballa, Anchoas y Guindillas",
          "price": 6.9
        }, {
          "name": "Jamón York, Queso, Lechuga, Tomate y Cebolla",
          "price": 6.9
        }, {
          "name": "Lechuga, Carne de ternera, Cebolla, Pimiento y Queso",
          "price": 7.9
        }, {
          "name": "Tomate, Lechuga, Cebolla y Salchichas",
          "price": 6.9
        }, {
          "name": "Carne troceada, ensalada, patatas dritas y salsas mahonesa, etc.",
          "price": 6.9
        }, {
          "name": "Hamburguesa, Frankfurt y Cebolla con pan de vidre",
          "price": 6.9
        }, {
          "name": "Carne picada, Queso, Jamón dulce, Cebolla, Pimiento, Pepino y Tomate",
          "price": 6.9
        }],
        "Platos combinados": [{
          "name": "Macarrones boloñesa, escalopa de cerdo y butifarra",
          "price": 10.9
        }, {
          "name": "Verdura del dia, escalopa de cerdo y butifarra",
          "price": 10.9
        }, {
          "name": "4 croquetas de pollo caseras 2 butifarras y patatas fritas",
          "price": 10.9
        }, {
          "name": "2 huevos fritos, 2 salchichas, 3 tiras de bacon y patatas fritas",
          "price": 9.9
        }, {
          "name": "2 huevos fritos, 10 alitas, pimiento frito, tomate y patatas fritas",
          "price": 9.9
        }, {
          "name": "2 huevos fritos, 4 alitas, 1 hamburguesa, 3 trozos de lomo, pimiento frito y patatas fritas",
          "price": 9.9
        }, {
          "name": "Tortilla francesa, pechuga de pollo a la plancha, pimiento frito, tomate, olivas y patatas fritas",
          "price": 9.9
        }, {
          "name": "2 huevos fritos, 4 croquetas, 1 hamburguesa, pimiento frito y patatas fritas",
          "price": 9.9
        }, {
          "name": "2 huevos fritos, 3 tiras de bacon, 1 hamburguesa, 1 frankfurt, pimiento frito, tomate y patatas fritas",
          "price": 9.9
        }, {
          "name": "7 croquetas, 8 rodajas de calamares a la romana, tomate y patatas fritas",
          "price": 9.9
        }, {
          "name": "1 hamburguesa, 8 rodajas de calamares a la romana y ensalada",
          "price": 9.9
        }, {
          "name": "1 huevo frito, 3 salchichas, 1 trozo de lomo, champiñones y patatas fritas",
          "price": 9.9
        }, {
          "name": "2 huevos fritos, 2 tiras de bacon, 3 salchichas, tomate en rodajas y patatas fritas",
          "price": 9.9
        }, {
          "name": "Huevo frito, pechuga de pollo, pimientos y patatas",
          "price": 9.9
        }, {
          "name": "2 huevos fritos, escalopa de cerdo y patatas fritas",
          "price": 9.9
        }, {
          "name": "2 huevos fritos, lomo y patatas fritas",
          "price": 9.9
        }, {
          "name": "2 huevos fritos, hamburguesa, patatas fritas y ensalada",
          "price": 9.9
        }, {
          "name": "2 huevos fritos, salchichas y patatas fritas",
          "price": 9.9
        }, {
          "name": "1 huevo frito, lomo, bacon y patatas fritas",
          "price": 9.9
        }, {
          "name": "2 huevos fritos, bacon y patatas fritas",
          "price": 9.9
        }, {
          "name": "lomo, ensalada y patatas fritas",
          "price": 9.9
        }, {
          "name": "2 huevos fritos, croquetas, patatas fritas",
          "price": 9.9
        }, {
          "name": "1 huevo frito, lomo, ensalada y patatas fritas",
          "price": 9.9
        }, {
          "name": "lomo, ensalada y patatas fritas",
          "price": 9.9
        }, {
          "name": "2 huevos fritos, lomo, alitas y patatas fritas",
          "price": 9.9
        }, {
          "name": "pechuga de pollo + ensalada",
          "price": 9.9
        }, {
          "name": "Tortilla francesa, calamares a la romana y ensalada",
          "price": 9.9
        }, {
          "name": "1 huevo frito, lomo, croquetas, ensalada y patatas fritas",
          "price": 9.9
        }, {
          "name": "3 huevos fritos, 3 trozos de pechuga de pollo y ensalada",
          "price": 12.9
        }, {
          "name": "2 huevos fritos, 2 trozos de pechuga de pollo, 2 tiras de bacon, 2 salchichas del país, 2 trozos de lomo, 1 chorizo, 1 pimiento y patatas fritas",
          "price": 14.9
        }],
        "Paellas y fideuá": [{
          "name": "Paella de marisco (mínimo 2 personas)",
          "price": 12.9
        }, {
          "name": "Paella de carne o de verduras (mínimo 2 personas)",
          "price": 12.9
        }, {
          "name": "Paella mixta de marisco y carne (mínimo 2 personas)",
          "price": 13.9
        }, {
          "name": "Fideua con gambitas, trozos de sepia y 3 gambas grandes (mínimo 2 personas)",
          "price": 19.9
        }],
        "Pizzas": [{
          "name": "Pizza de verduras: pimiento rojo, cebolla, tomate, berenjena, calabacín y mozzarella",
          "price": 10.9
        }, {
          "name": "Pizza 4 quesos: tomate, gouda, edam, queso azul y mozzarella",
          "price": 10.9
        }, {
          "name": "Pizza gourmet: tomate, pollo, bacon, cebolla y mozzarella",
          "price": 10.9
        }, {
          "name": "Pizza de Jamon york, tomate, bacon, queso y mozzarella",
          "price": 10.9
        }, {
          "name": "Pizza Barbacoa: carne, bacon, mozzarella y salsa barbacoa",
          "price": 10.9
        }, {
          "name": "Pizza Carbonara: champiñones, bacon, cebolla, mozzarella y salsa carbonara",
          "price": 10.9
        }, {
          "name": "Pizza Napolitana: tomate, atún, cebolla, orégano y mozzarella",
          "price": 10.9
        }, {
          "name": "Pizza 4 Estaciones: alcachofas, champiñones, olivas negras, orégano, jamón york y mozzarella",
          "price": 10.9
        }, {
          "name": "Pizza Margarita: Tomate y mozzarella",
          "price": 10.9
        }, {
          "name": "Pizza Hawaiana: tomate, jamón york a tacos, piña, orégano y mozzarella",
          "price": 10.9
        }],
        "Pollos": [{
          "name": "Pollo a l'ast con 4 medias patatas asadas",
          "price": 14.9
        }, {
          "name": "Pollo a l'ast con 4 medias patatas asadas + 6 canelones + botella de vino o refresco de litro",
          "price": 19.9
        }, {
          "name": "Pollo a l'ast con 4 medias patatas asadas + 4 raciones de macarrones + botella de vino o refresco de litro",
          "price": 20.9
        }, {
          "name": "Pollo a l'ast con 4 medias patatas asadas + 4 raciones de ensaladilla rusa + botella de vino o refresco de litro",
          "price": 20.9
        }, {
          "name": "Pollo a l'ast con 4 medias patatas asadas + 12 canelones + botella de vino o refresco de litro",
          "price": 22.9
        }, {
          "name": "Pollo a l'ast con 4 medias patatas asadas + 15 croquetas de pollo + botella de vino o refresco de litro",
          "price": 22.9
        }, {
          "name": "Pollo a l'ast con 4 medias patatas asadas + 4 raciones de fideuá + botella de vino o refresco de litro",
          "price": 24.9
        }],
        "Bebidas": [{
          "name": "Cerveza de lata Damm",
          "price": 2.0
        }, {
          "name": "Cerveza sin alcohol Heineken",
          "price": 2.0
        }, {
          "name": "Cocacola lata",
          "price": 2.0
        }, {
          "name": "Pepsi max",
          "price": 2.0
        }, {
          "name": "Nestea (lipton)",
          "price": 2.0
        }, {
          "name": "Aquarius (aquarade)",
          "price": 2.0
        }, {
          "name": "Zumo de botella",
          "price": 2.3
        }, {
          "name": "Agua de 1/5 litro",
          "price": 2.0
        }, {
          "name": "Agua de 1,5 litro",
          "price": 2.0
        }, {
          "name": "Kas de naranja",
          "price": 2.0
        }, {
          "name": "Kas de limón",
          "price": 2.0
        }, {
          "name": "Pepsi de litro",
          "price": 2.8
        }, {
          "name": "Kas de litro",
          "price": 2.8
        }]
      };
      let selectedProducts = {};
      document.addEventListener("DOMContentLoaded", () => {
        const productContainer = document.getElementById("product-container");
        const summaryContainer = document.getElementById("summary-container");
        const totalPriceElement = document.getElementById("total-price");

        function updateSummary() {
          let total = 0;
          summaryContainer.innerHTML = "";
          Object.entries(selectedProducts).forEach(([name, {
            price,
            quantity
          }]) => {
            const itemTotal = price * quantity;
            total += itemTotal;
            const summaryItem = document.createElement("tr");
            summaryItem.innerHTML = `
              
			<td>${name}</td>
			<td>
				<input type="number" min="1" value="${quantity}" class="quantity w-16 border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm" />
			</td>
            `;
            summaryContainer.appendChild(summaryItem);
            summaryItem.querySelector("input.quantity").addEventListener("change", function() {
              selectedProducts[name].quantity = parseInt(this.value);
              updateSummary();
            });
          });
          // Calculate transport commission
          const deliveryType = document.getElementById('deliveryType').value;
          const locationType = document.getElementById('locationType')?.value || "";
          let transportCommission = 0;
          if (deliveryType == 'A domicilio') {
            document.getElementById('direccion').required = true;
            transportCommission = locationType == 'El Vendrell' ? 1.9 : 2.9;
          } else {
            document.getElementById('direccion').required = false;
          }
          // Calculate service fee (1.5% of total)
          const serviceFee = total * 0.015;
          // Calculate grand total
          const grandTotal = total + transportCommission + serviceFee;
          // Update the total price element
          const deliveryTypeSelect = document.getElementById('deliveryType');
          const locationField = document.getElementById('location');
          deliveryTypeSelect.addEventListener('change', function() {
            if (this.value === 'A domicilio') {
              locationField.classList.remove('hidden');
            } else {
              locationField.classList.add('hidden');
            }
            updateSummary()
          });
          locationField.addEventListener('change', function() {
            updateSummary()
          })
          totalPriceElement.innerHTML = `
            
			<p>Subtotal: ${total.toFixed(2)} €</p>
			<p>Comisión por transporte: ${transportCommission.toFixed(2)} €</p>
			<p>Gastos del servicio: ${serviceFee.toFixed(2)} €</p>
			<p>Total: ${grandTotal.toFixed(2)} €</p>
          `;
        }
        for (const [category, items] of Object.entries(products)) {
          const categoryDiv = document.createElement("div");
          categoryDiv.classList.add("mb-6");
          const categoryTitle = document.createElement("h2");
          categoryTitle.classList.add("text-2xl", "font-bold", "mb-4");
          categoryTitle.textContent = category;
          categoryDiv.appendChild(categoryTitle);
          const productGrid = document.createElement("div");
          productGrid.classList.add("grid", "grid-cols-1", "md:grid-cols-2", "gap-4");
          items.forEach(item => {
            const productCard = document.createElement("div");
            productCard.classList.add("product-card", "border", "rounded-lg", "shadow-sm", "flex", "justify-between", "items-center", "cursor-pointer");
            productCard.dataset.selected = "false";
            productCard.addEventListener("click", () => {
              if (productCard.dataset.selected === "false") {
                productCard.dataset.selected = "true";
                productCard.classList.add("selected");
                selectedProducts[item.name] = {
                  price: item.price,
                  quantity: 1
                };
              } else {
                productCard.dataset.selected = "false";
                productCard.classList.remove("selected");
                delete selectedProducts[item.name];
              }
              updateSummary();
            });
            const productInfo = document.createElement("div");
            productInfo.classList.add("flex", "justify-between", "w-full");
            productInfo.innerHTML = `
              
			<div>
				<p class="text-lg font-medium">${item.name}</p>
				<p class="text-sm text-gray-500">${item.price.toFixed(2)} €</p>
			</div>
			<input type="hidden" class="quantity" value="1" />
            `;
            productCard.appendChild(productInfo);
            productGrid.appendChild(productCard);
          });
          categoryDiv.appendChild(productGrid);
          productContainer.appendChild(categoryDiv);
        }
        document.getElementById("orderForm").addEventListener("submit", async function(event) {
          event.preventDefault(); // Prevent the form from submitting normally
          // Check if there are any selected products
          if (Object.keys(selectedProducts).length === 0) {
            alert("Por favor, selecciona al menos un producto.");
            return;
          }
          // Check if all visible required fields are filled
          const requiredFields = document.querySelectorAll("input[required], select[required], textarea[required]");
          for (const field of requiredFields) {
            if (!field.value.trim() && !field.closest('.hidden')) {
              alert(`Por favor, completa el campo: ${field.previousElementSibling.textContent}`);
              return;
            }
          }
          // Create the JSON object
          const json = {
            products: Object.entries(selectedProducts).map(([name, {
              price,
              quantity
            }]) => ({
              name,
              price,
              quantity
            })),
            contact_info: {
              nombre: document.getElementById("nombre").value,
              apellidos: document.getElementById("apellidos").value,
              telefono: document.getElementById("telefono").value
            },
            delivery_info: {
              deliveryDate: document.getElementById("deliveryDate").value,
              deliveryTime: document.getElementById("deliveryTime").value,
              deliveryType: document.getElementById("deliveryType").value,
              locationType: document.getElementById("locationType")?.value || "",
              direccion: document.getElementById("direccion")?.value || ""
            },
            payment_method: document.querySelector('input[name="paymentMethod"]:checked')?.value || "",
            comments: document.getElementById("comentarios").value
          };
          const price = json.products.reduce((a, b) => a + (b.price * b.quantity), 0);
          if (json.delivery_info.deliveryType != "Ca La Maria") {
            if (json.delivery_info.locationType == "El Vendrell") {
              if (price < 10) {
                window.alert("El pedido tiene que ser superior a 10€");
                return;
              }
            } else {
              if (price < 20) {
                window.alert("El pedido tiene que ser superior a 20€");
                return;
              }
            }
          }
          async function processPayment(finalJSON, paymentMethod) {
            document.getElementById('buttonText').classList.add('hidden');
            document.getElementById('spinner').classList.remove('hidden');
            try {
              const response = await fetch('https://europe-west1-goil-community.cloudfunctions.net/caLaMariaOrderVerification', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json'
                },
                body: finalJSON
              });
              if (response.ok) {
                const data = await response.json();
                window.location.href = data.data.url;
              } else {
                const data = await response.json();
                window.alert(data.error);
              }
            } catch (error) {
              window.alert(error);
            }
          }
          const finalJSON = JSON.stringify(json, null, 2);
          if (json.payment_method === "Tarjeta") {
            const confirmMessage = "En caso de que necesites ingresar a la aplicación del banco para efectuar el pago, regresa a la aplicación para finalizar tu pedido una vez que el pago esté confirmado.";
            const val = confirm(confirmMessage);
            if (val) {
              processPayment(finalJSON, json.payment_method);
            } else {
              console.log("Operación cancelada por el usuario.");
            }
          } else {
            processPayment(finalJSON, json.payment_method);
          }
        });
      });
    </script>
  </head>
  <body class="bg-gray-100">
    <div class="min-h-screen py-6 flex flex-col justify-center sm:py-12">
      <div class="relative py-3 sm:max-w-4xl sm:mx-auto">
        <div class="relative px-4 py-10 bg-white mx-8 md:mx-0 shadow rounded-3xl sm:p-10">
          <div class="max-w-2xl mx-auto">
            <h1 class="text-3xl font-bold mb-6">Ca La Maria - Haz tu pedido</h1>
            <form id="orderForm">
              <!-- Sección de selección de productos -->
              <div id="product-container" class="mb-6"></div>
              <hr class="my-2 border-gray-300" />
              <!-- Sección de datos de contacto -->
              <div id="contact-info" class="mb-6">
                <h2 class="text-2xl font-bold mb-4">Datos de Contacto</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                  <div>
                    <label for="nombre" class="block text-sm font-medium text-gray-700">Nombre</label>
                    <input type="text" id="nombre" name="nombre" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm" placeholder="Nombre" required />
                  </div>
                  <div>
                    <label for="apellidos" class="block text-sm font-medium text-gray-700">Apellidos</label>
                    <input type="text" id="apellidos" name="apellidos" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm" placeholder="Apellidos" required />
                  </div>
                  <div>
                    <label for="telefono" class="block text-sm font-medium text-gray-700">Teléfono</label>
                    <input type="tel" id="telefono" name="telefono" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="Teléfono" required />
                  </div>
                </div>
              </div>
              <hr class="my-2 border-gray-300" />
              <!-- Sección de datos de entrega -->
              <div id="delivery-info" class="mb-6">
                <h2 class="text-2xl font-bold mb-4">Datos de Entrega</h2>
                <p class="text-sm text-gray-700 mb-4"> El horario de entrega es el siguiente: <br> - Lunes a Sábado de 10 a 16h y de 20 a 22 h <br> - Domingo de 10 a 16 h <br> Fuera de este horario no se harán entregas. </p>
                <div class="grid grid-cols-1 gap-4 mb-4">
                  <div>
                    <label for="deliveryDate" class="block text-sm font-medium text-gray-700">Día de Entrega</label>
                    <input type="date" id="deliveryDate" name="deliveryDate" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm" required />
                  </div>
                  <div>
                    <label for="deliveryTime" class="block text-sm font-medium text-gray-700">Hora de Entrega</label>
                    <input type="time" id="deliveryTime" name="deliveryTime" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm" required />
                  </div>
                  <div>
                    <label for="deliveryType" class="block text-sm font-medium text-gray-700">Sitio de Entrega</label>
                    <select id="deliveryType" name="deliveryType" class="mt-1 block w-full pl-3 pr-10 py-2 border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                      <option value="Ca La Maria">Ca La Maria</option>
                      <option value="A domicilio">A domicilio</option>
                    </select>
                  </div>
                  <div id="location" class="hidden grid grid-cols-1 gap-4 mb-4">
                    <p class="text-sm text-gray-700"> Coste del servicio a domicilio para El Vendrell 1,99 € pedido mínimo 10 € <br /> Coste del servicio a domicilio fuera de El Vendrell 2,99 € pedido mínimo 20 € </p>
                    <div id="locationField">
                      <label for="locationType" class="block text-sm font-medium text-gray-700">Ubicación</label>
                      <select id="locationType" name="locationType" class="mt-1 block w-full pl-3 pr-10 py-2 border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                        <option value="El Vendrell">El Vendrell</option>
                        <option value="Fuera de El Vendrell">Fuera de El Vendrell</option>
                      </select>
                    </div>
                    <div id="addressField">
                      <label for="direccion" class="block text-sm font-medium text-gray-700">Dirección (Incluye el nombre de la población)</label>
                      <input type="text" id="direccion" name="direccion" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm" placeholder="Dirección" />
                    </div>
                  </div>
                </div>
              </div>
              <hr class="my-2 border-gray-300" />
              <!-- Nueva sección de forma de pago -->
              <div id="payment-method" class="mb-6">
                <h2 class="text-2xl font-bold mb-4">Forma de Pago</h2>
                <div class="grid grid-cols-1 gap-4 mb-4">
                  <div>
                    <div class="mt-2 flex items-center">
                      <input type="radio" id="efectivo" name="paymentMethod" value="Efectivo" class="form-radio h-4 w-4 text-blue-600 transition duration-150 ease-in-out" required />
                      <label for="efectivo" class="ml-3 block text-sm font-medium text-gray-700">Efectivo</label>
                    </div>
                    <div class="mt-2 flex items-center">
                      <input type="radio" id="tarjeta" name="paymentMethod" value="Tarjeta" class="form-radio h-4 w-4 text-blue-600 transition duration-150 ease-in-out" />
                      <label for="tarjeta" class="ml-3 block text-sm font-medium text-gray-700">Tarjeta</label>
                    </div>
                  </div>
                </div>
              </div>
              <hr class="my-2 border-gray-300" />
              <!-- Sección de comentarios -->
              <div id="comments" class="mb-6">
                <h2 class="text-2xl font-bold mb-4">Comentarios</h2>
                <div class="grid grid-cols-1 gap-4 mb-4">
                  <div>
                    <label for="comentarios" class="block text-sm font-medium text-gray-700"> Alergias, ingredientes que quieras añadir o quitar… </label>
                    <textarea id="comentarios" name="comentarios" rows="4" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="Escribe tus comentarios aquí"></textarea>
                  </div>
                </div>
              </div>
              <!-- Sección de resumen -->
              <div id="summary" class="mb-6">
                <h2 class="text-2xl font-bold mb-4">Pedido</h2>
                <table class="summary-table">
                  <thead>
                    <tr>
                      <th>Producto</th>
                      <th>Cantidad</th>
                    </tr>
                  </thead>
                  <tbody id="summary-container"></tbody>
                </table>
                <div id="total-price" class="font-bold text-right mt-4">Total: 0.00 €</div>
              </div>
              <!-- Botón de envío -->
              <div class="block items-center">
                <button type="submit" id="submitButton" class="bg-blue-500 flex justify-center items-center w-full text-white px-4 py-3 rounded-md focus:outline-none disabled:opacity-30">
                  <div class="hidden" id="spinner">
                    <div class="border-gray-300 h-5 w-5 animate-spin rounded-full border-2 border-t-blue-600"></div>
                  </div>
                  <span id="buttonText" class="mr-2">Realizar pedido</span>
                </button>
                <p class="text-center italic text-xs text-gray-500">La página redirigirá automáticamente a la pasarela de pago.</p>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>